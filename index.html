<!doctype html>
<html lang="en">

	<head>
		<meta charset="utf-8">

		<title>Executable Software Specification with Specs2</title>

		<meta name="description" content="Executable Software Specification with Specs2">
		<meta name="author" content="Jacek Laskowski">

		<meta name="apple-mobile-web-app-capable" content="yes" />
		<meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />

		<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no, minimal-ui">

		<link rel="stylesheet" href="css/reveal.css">
		<link rel="stylesheet" href="css/theme/beige.css" id="theme">

		<!-- Code syntax highlighting -->
		<link rel="stylesheet" href="lib/css/zenburn.css">

		<!-- Printing and PDF exports -->
		<script>
			var link = document.createElement( 'link' );
			link.rel = 'stylesheet';
			link.type = 'text/css';
			link.href = window.location.search.match( /print-pdf/gi ) ? 'css/print/pdf.css' : 'css/print/paper.css';
			document.getElementsByTagName( 'head' )[0].appendChild( link );
		</script>

		<!--[if lt IE 9]>
		<script src="lib/js/html5shiv.js"></script>
		<![endif]-->
	</head>

	<body>

		<div class="reveal">

			<div class="slides">
				<section class="intro" data-transition="zoom">
					<h1>specs2</h1>
					<h2>Translating Requirements into Executable Software Specification</h2>
					<h4>30-minute tour</h4>
					<p>
						<small>Delivered by <a href="http://jaceklaskowski.pl">Jacek Laskowski</a> / <a href="http://twitter.com/jaceklaskowski">@jaceklaskowski</a></small>
					</p>
				</section>

        <section>
          <h2>Agenda</h2>

          <ul>
            <li>Why specs2 (when ScalaTest around)</li>
            <li>DataTables</li>
            <li>Auto-examples</li>
            <li>Forms</li>
            <li>Integration with ScalaCheck</li>
            <li>HTML output for specifications</li>
          </ul>
        </section>


				<section>
					<h2>Why specs2</h2>

					<section>
						<br>
						<p>
							<IMG width="60%" src="images/specs2-3.M1-support-idea-14.0.3.png">
						</p>

						<aside class="notes">...</aside>
					</section>

					<section>
						<br>
						<p>
							<IMG width="50%" src="images/twitter-eric-conversation.png">
						</p>

						<aside class="notes">...</aside>
					</section>

					<section>
						<br>
						<p>
							<IMG src="images/specs2-released.png">
						</p>

						<aside class="notes">...</aside>
					</section>
				</section>

				<section>
					<h2>How to get started</h2>

					<section data-transition="zoom">
						<p><b>build.sbt</b></p>
						<pre style="max-width: none; width: 100%"><code class="scala">
resolvers += "Scalaz Bintray Repo" at "http://dl.bintray.com/scalaz/releases"
libraryDependencies += "org.specs2" %% "specs2-core" % "3.0" % "test"
						</code></pre>
						<aside class="notes">Acceptance specification style</aside>
					</section>
				</section>

				<section>
					<h2>DataTables</h2>
					<section>
						<h3>Use cases</h3>
						<ul  style="text-align: left;">
							<li>A very effective way of grouping similar examples into one.</li>
							<li>Lots of expectations inside one example in a 'natural' tabular form.</li>
							<li>ASCII tables that contain sample values and the end result.</li>
						</ul>
					</section>

					<section>
            <br>
            <br>
						<pre style="max-width: none; width: 115%"><code class="scala">
import org.specs2._
import matcher.DataTables

class DataTableSpec extends Specification with DataTables { def is = s2"""

    adding integers should just work in scala  $e1
  """

  def e1 =
    "a"   | "b" | "c" |               // the header of the table, with `|` separated strings
     2    !  2  !  4  |               // an example row
     1    !  1  !  3  |> {            // the > operator to "execute" the table
     (a, b, c) =>  a + b must_== c    // the expectation to check on each row
  }

}
						</code></pre>
					</section>

          <section>
            <h3>Structure</h3>
            <ul>
              <li>A header defining column names and rows holding values.</li>
              <li>Column names separated with <b>|</b> (<i>pipe</i>).</li>
              <li>Row values separated with <b>!</b> (<i>bang</i>).</li>
            </ul>
          </section>

					<section>
            <br>
            <br>
            <pre><code>
[info] DataTableSpec
[info]
[info]     x adding integers should just work in scala
[error]   | a | b | c |
[error] + | 2 | 2 | 4 |
[error] x | 1 | 1 | 3 | '2' is not equal to '3' (DataTableSpec.scala:13)
[info]
[info]
[info] Total for specification DataTableSpec
[info] Finished in 32 ms
[info] 1 example, 1 failure, 0 error
            </code></pre>
            <pre class="fragment roll-in"><code>
[info] DataTableSpec
[info]
[info]     + adding integers should just work in scala
[info]
[info] Total for specification DataTableSpec
[info] Finished in 26 ms
[info] 1 example, 0 failure, 0 error
            </code></pre>
          </section>
				</section>

				<section>

					<h2>Auto-examples</h2>

					<section>
						<h3>Use cases</h3>
						<ul style="text-align: left;">
							<li>Useful when examples are so self-descriptive that a textual description feels redundant.</li>
              <li>Demonstrating the use of a DSL or an API.</li>
              <li>Macros to capture code expressions inside brackets {}.</li>
						</ul>
					</section>

          <section>
            <br>
            <br>
            <pre style="max-width: none; width: 100%"><code class="scala">
import org.specs2._

class AutoExampleSpec extends Specification { def is = s2"""

    The `capitalize` method verifies
      ${ "hello".capitalize       === "Hello" }
      ${ "Hello".capitalize       === "Hello" }
      ${ "hello world".capitalize === "Hello world" }
  """
}
            </code></pre>
          </section>

          <section>
            <br>
            <pre><code class="scala">
s2"""
  The `capitalize` method verifies
    ${ "hello".capitalize       === "Hello" }
    ${ "Hello".capitalize       === "Hello" }
    ${ "hello world".capitalize === "Hello world" }
"""
            </code></pre>
            <pre class="fragment roll-in"><code class="scala">
[info] AutoExampleSpec
[info]
[info]     The `capitalize` method verifies
[info]       + "hello".capitalize       === "Hello"
[info]       + "Hello".capitalize       === "Hello"
[info]       + "hello world".capitalize === "Hello world"
[info]
[info] Total for specification AutoExampleSpec
[info] Finished in 32 ms
[info] 3 examples, 0 failure, 0 error
            </code></pre>
          </section>

				</section>

				<section>

					<h2>Forms (aka FormsPage)</h2>

          <section data-transition="zoom">
            <p><b>build.sbt</b></p>
            <pre style="max-width: none; width: 100%"><code class="scala">
resolvers += "Scalaz Bintray Repo" at "http://dl.bintray.com/scalaz/releases"
libraryDependencies += "org.specs2" %% "specs2-form" % "3.0" % "test"
            </code></pre>

            <aside class="notes">Acceptance specification style</aside>
          </section>

          <section>
            <pre style="max-width: none; width: 115%"><code class="scala">
import org.specs2._
import form.Form

class SpecificationWithForms extends Specification with specification.Forms { def is = s2"""

  The address must be retrieved from the database with the proper street and number
    ${Form("Address").
        tr(prop("street", actualStreet(123), "Oxford St")).
        tr(prop("number", actualNumber(123), 20))}
  """

  def actualStreet(no: Int) = "Oxford St"
  def actualNumber(no: Int) = 20
}
            </code></pre>
          </section>

          <section>
            <pre style="max-width: none; width: 115%"><code class="scala">
[info] SpecificationWithForms
[info]
[info]   The address must be retrieved from the database with the proper street and number
[info]     + | Address           |
[info]   | street: Oxford St |
[info]   | number: 20        |
[info]
[info] Total for specification SpecificationWithForms
[info] Finished in 0 ms
[info] 1 example, 5 expectations, 0 failure, 0 error
            </code></pre>
            <p class="fragment roll-in">Formatting is not an issue since the aim is the HTML page.</p>
          </section>

          <section>
            <br>
            <p>
              <img width="100%" src="images/specs-specificationwithforms-html.png">
            </p>

            <aside class="notes">...</aside>
          </section>

					<section>
						<h3>Use cases</h3>
						<ul style="text-align: left;">
              <li>Create human-readable HTML documentation</li>
							<li>Represent domain objects or services, and declare expected values in a tabular format</li>
							<li>Reusable pieces of specification with complex forms built out of simple ones</li>
						</ul>
					</section>

				</section>

				<section>

					<h2>Integration with ScalaCheck</h2>

          <section data-transition="zoom">
            <p><b>build.sbt</b></p>
            <pre style="max-width: none; width: 100%"><code class="scala">
resolvers += "Scalaz Bintray Repo" at "http://dl.bintray.com/scalaz/releases"
libraryDependencies += "org.specs2" %% "specs2-scalacheck" % "3.0" % "test"
            </code></pre>

            <aside class="notes">...</aside>
          </section>

					<section>
						<h3>Use cases</h3>
						<ul style="text-align: left;">
							<li>Creating <b>tons</b> of expectations with ease</li>
              <li class="fragment">4 examples, <b>400 expectations</b>, 0 failure, 0 error
                <ul>
                  <li class="fragment"><a href="http://scalacheck.org/">ScalaCheck</a> #FTW!</li>
                </ul>
              </li>
						</ul>
					</section>

          <section>
            <pre style="max-width: none; width: 110%"><code class="scala">
import org.specs2._

class ScalaCheckSpec extends Specification with ScalaCheck { def is = s2"""

    startsWith ${ prop { (a: String, b: String) => (a+b) must startWith(a) } }
    endsWith   ${ prop { (a: String, b: String) => (a+b) must endWith(b) } }
    substring  ${ prop { (a: String, b: String) => (a+b).substring(a.length) === b } }
    addition and multiplication are related ${ prop { (a: Int) => a + a == 2 * a } }
  """
}
            </code></pre>
            <p class="fragment roll-in">Note the <b>4</b> examples only.</p>
          </section>

          <section>
            <pre><code class="scala">
[info] ScalaCheckSpec
[info]
[info]     + startsWith
[info]     + endsWith
[info]     + substring
[info]     + addition and multiplication are related
[info]
[info] Total for specification ScalaCheckSpec
[info] Finished in 30 ms
[info] 4 examples, 400 expectations, 0 failure, 0 error
            </code></pre>
            <p class="fragment roll-in">4 examples make for <b>400</b> expectations!</p>
          </section>

          <section>
            <h3>Structure</h3>
            <pre style="max-width: none; width: 100%"><code>
class ScalaCheckSpec extends Specification with ScalaCheck { def is = s2"""

    startsWith ${ prop { (a: String, b: String) => (a+b) must startWith(a) } }
  """

}
            </code></pre>
            <ul>
              <li>Extend the ScalaCheck trait.</li>
              <li>Pass functions returning <code>Result</code> to the <code>prop</code> method.</li>
              <li>Use the resulting Prop as your example body.</li>
            </ul>
          </section>

				</section>


        <section>
          <h2>HTML output for specifications</h2>

          <section data-transition="zoom">
            <p><b>build.sbt</b></p>
            <pre style="max-width: none; width: 100%"><code class="scala">
resolvers += "Scalaz Bintray Repo" at "http://dl.bintray.com/scalaz/releases"
libraryDependencies += "org.specs2" %% "specs2-html" % "3.0" % "test"
            </code></pre>

            <aside class="notes">...</aside>
          </section>

          <section>
            <br>
            <br>
            <pre style="max-width: none; width: 100%"><code>
➜  specs2-sandbox  sbt "testOnly SpecificationWithForms -- html"
[info] Loading global plugins from /Users/jacek/.sbt/0.13/plugins
[info] Loading project definition from /Users/jacek/dev/sandbox/specs2-sandbox/project
[info] Set current project to specs2-sandbox (in build file:/Users/jacek/dev/sandbox/specs2-sandbox/)
[error] the pandoc executable is not available at: pandoc
[error] Error: Total 1, Failed 0, Errors 1, Passed 0
[error] Error during tests:
[error]   SpecificationWithForms
[error] (test:testOnly) sbt.TestsFailedException: Tests unsuccessful
[error] Total time: 1 s, completed Mar 6, 2015 11:49:19 PM
            </code></pre>
            <p class="fragment roll-in" style="max-width: none; width: 100%">
              Mind the errors when the pandoc executable is not available at: pandoc
            </p>
            <p class="fragment roll-in" style="max-width: none; width: 100%">
              <a href="http://johnmacfarlane.net/pandoc/">http://johnmacfarlane.net/pandoc/</a> - a universal document converter
            </p>
          </section>

          <section>
            <pre style="max-width: none; width: 100%"><code>
➜  specs2-sandbox  sbt "testOnly SpecificationWithForms -- html"
[info] Loading global plugins from /Users/jacek/.sbt/0.13/plugins
[info] Loading project definition from /Users/jacek/dev/sandbox/specs2-sandbox/project
[info] Set current project to specs2-sandbox (in build file:/Users/jacek/dev/sandbox/specs2-sandbox/)
[info] Passed: Total 0, Failed 0, Errors 0, Passed 0
[success] Total time: 1 s, completed Mar 6, 2015 11:54:35 PM
            </code></pre>
            <pre class="fragment roll-in" style="max-width: none; width: 100%"><code>
➜  specs2-sandbox  open target/specs2-reports/SpecificationWithForms.html
            </code></pre>
          </section>

          <section>
            <br>
            <p>
              <img width="100%" src="images/specs-specificationwithforms-html.png">
            </p>
            <p>This is the same HTML page as shown before.</p>

            <aside class="notes">...</aside>
          </section>

          <section>
            <h3>Use cases</h3>
            <ul style="text-align: left;">
              <li>Create human-readable HTML documentation</li>
            </ul>
            <img width="70%" src="images/specs-specificationwithforms-html.png">
          </section>

        </section>

				<section data-background-image="images/end.jpg">
          <!-- THAT'S IT FOLKS -->
				</section>

				<section style="text-align: left">
					<h1>Questions?</h1>
					<h3><a href="https://blog.jaceklaskowski.pl">Jacek Laskowski</a> / <a href="https://twitter.com/jaceklaskowski">@jaceklaskowski</a> / <a href="https://github.com/jaceklaskowski">GitHub</a></h3>
				</section>

			</div>

		</div>

		<script src="lib/js/head.min.js"></script>
		<script src="js/reveal.js"></script>

		<script>

			// Full list of configuration options available at:
			// https://github.com/hakimel/reveal.js#configuration
			Reveal.initialize({
				controls: true,
				progress: true,
				history: true,
				center: true,

				transition: 'slide', // none/fade/slide/convex/concave/zoom

				// Optional reveal.js plugins
				dependencies: [
					{ src: 'lib/js/classList.js', condition: function() { return !document.body.classList; } },
					{ src: 'plugin/markdown/marked.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/markdown/markdown.js', condition: function() { return !!document.querySelector( '[data-markdown]' ); } },
					{ src: 'plugin/highlight/highlight.js', async: true, condition: function() { return !!document.querySelector( 'pre code' ); }, callback: function() { hljs.initHighlightingOnLoad(); } },
					{ src: 'plugin/zoom-js/zoom.js', async: true },
					{ src: 'plugin/notes/notes.js', async: true }
				]
			});

		</script>

	</body>
</html>
